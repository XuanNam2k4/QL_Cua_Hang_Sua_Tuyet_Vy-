@model Project_64131375.Models.Home_64131375Model
@{
    ViewBag.Title = "Index_64131375";
    Layout = "~/Views/Shared/_LayoutUser_64131375.cshtml";
}

<style>
   
    .cat-itemee {
        background: #FFFFFF; /* Màu nền mặc định */
        transition: background 0.5s; /* Hiệu ứng chuyển màu */
    }

        /* Đổi màu xanh khi hover */
        .cat-itemee:hover {
            background: #13d8ec !important; /* Màu xanh khi hover */
        }

        /* Ảnh bên trong cat-itemee */
        .cat-itemee img {
            transition: transform 0.5s; /* Hiệu ứng phóng to ảnh */
        }

        /* Hiệu ứng ảnh khi hover */
        .cat-itemee:hover img {
            transform: scale(1.2) rotate(5deg); /* Phóng to và xoay nhẹ */
        }
    .title-sub {
        background-color: #13d8ec !important;
    }

</style>

<!-- Carousel Start -->
<div class="container-fluid mb-3">
<div class="row px-xl-12">
    <div class="col-lg-12">
        <div id="carouselHome" class="carousel slide carousel-fade mb-30 mb-lg-0" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item position-relative active" style="height: 700px;">
                    <img class="position-absolute w-100 h-100" src="~/Content/userAssets/img/carousel11.jpg">

                </div>
                <div class="carousel-item position-relative" style="height: 700px;">
                    <img class="position-absolute w-100 h-100" src="~/Content/userAssets/img/carousel44.jpg">

                </div>
                <div class="carousel-item position-relative" style="height: 700px;">
                    <img class="position-absolute w-100 h-100" src="~/Content/userAssets/img/carousel2.jpg">

                </div>
                <div class="carousel-item position-relative" style="height: 700px;">
                    <img class="position-absolute w-100 h-100" src="~/Content/userAssets/img/carousel77.jpg">

                </div>
                <div class="carousel-item position-relative" style="height: 700px;">
                    <img class="position-absolute w-100 h-100" src="~/Content/userAssets/img/carousel55.jpg">

                </div>
            </div>

            <a class="carousel-control-prev" href="#carouselHome" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselHome" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

</div>
    </div>



<!-- Carousel End -->
<!-- Featured Start -->
<div class="container-fluid pt-5">
    <div class="row px-xl-5 pb-3">
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                @*đổi màu xanh nước bien*@
                <h1 class="fa fa-check text-info m-0 mr-3"></h1>
                <h5 class="font-weight-semi-bold m-0">Sản phẩm chất lượng</h5>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                <h1 class="fa fa-shipping-fast text-info m-0 mr-2"></h1>
                <h5 class="font-weight-semi-bold m-0">Miễn phí vận chuyển</h5>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                <h1 class="fas fa-exchange-alt text-info m-0 mr-3"></h1>
                <h5 class="font-weight-semi-bold m-0">Đổi Trả trong 14 ngày</h5>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
            <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                <h1 class="fa fa-phone-volume text-info m-0 mr-3"></h1>
                <h5 class="font-weight-semi-bold m-0">Hỗ trợ 24/7</h5>
            </div>
        </div>
    </div>
</div>
<!-- Featured End -->
<!-- Categories Start -->
<div class="container-fluid pt-5">
    <div class="row px-xl-3 d-flex justify-content-between pb-1">
        <h2 class=" text-uppercase mx-xl-5 mb-4"><span class="title-sub"></span> <span class="bg-secondary pr-3">Danh mục sản phẩm</span></h2>
        <a href="@Url.Action("TimKiemSanPhamSua_64131375", "Category_64131375")"
           class="title-view-all text-uppercase pt-4 mx-xl-5">Xem tất cả<i class="fas fa-long-arrow-alt-right"></i></a>
    </div>
    <div class="row px-xl-5 pb-3">
        @{
            var danhSachLoaiSuas = from loaiSua in Model.LoaiSuas
                                   join sps in Model.SanPhamSuas
                                   on loaiSua.MaLoaiSua equals sps.MaLoaiSua into sanPhamSua
                                   select new { LoaiSua = loaiSua, AnhLoaiSua = loaiSua.AnhLoaiSua, MaLoai = loaiSua.MaLoaiSua, SoLuong = sanPhamSua.Sum(nc => nc.SoLuong) };
        }

        @foreach (var item in danhSachLoaiSuas)
        {

            <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
                <form method="get" class="text-decoration-none" action="@Url.Action("TimKiemSanPhamSua_64131375", "Category_64131375")">
                    <div class="cat-itemee d-flex align-items-center mb-4">
                        <div class="overflow-hidden" style="width: 100px; height: 100px;">

                            <img class="img-fluid" src="~/Content/assets/img/LoaiSua/@item.AnhLoaiSua" alt="">
                        </div>
                        <div class="flex-fill pl-3">
                            <h6>   <input style="border: none;background-color:#fff" type="submit" value="@item.LoaiSua.TenLoaiSua" class="nav-item nav-link"> </h6>

                            <input style="display:none" type="text" name="MaLoaiSua" value="@item.LoaiSua.MaLoaiSua" />
                            <small class="text-body">@item.SoLuong sản phẩm</small>
                        </div>
                    </div>
                </form>
            </div>
        }





    </div>
</div>
<!-- Categories End -->
<!-- Products Start -->
<div class="container-fluid pt-5 pb-3">
    <div class="row px-xl-3 d-flex justify-content-between pb-1">
        <h2 class=" text-uppercase mx-xl-5 mb-4"><span class="title-sub"></span> <span class="bg-secondary pr-3">Sản phẩm mới</span></h2>
        <a href="@Url.Action("TimKiemSanPhamSua_64131375", "Category_64131375")"
           class="title-view-all text-uppercase pt-4 mx-xl-5">Xem tất cả<i class="fas fa-long-arrow-alt-right"></i></a>
    </div>

    <div class="row px-xl-5">
        @foreach (var item in Model.SanPhamSuas.OrderByDescending(x => x.MaSua.Length >= 3 ? int.Parse(x.MaSua.Substring(x.MaSua.Length - 3)) : 0).Take(8)
)
        {
            <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
                <div class="product-item bg-light mb-4">

                    <div class="product-img position-relative overflow-hidden item-height">
                        <img class="img-fluid w-100 h-100" src="~/Content/assets/img/SanPhamSua/@item.AnhSua" alt="">
                        <div class="product-action">
                            <a class="btn btn-outline-info btn-square add-to-cart-btn" href="#" data-product-id="@item.MaSua"><i class="fa fa-shopping-cart"></i></a>
                            <a class="btn btn-outline-info btn-square" href="@Url.Action("Details", "Product_64131375", new { Id = item.MaSua })"><i class="fa fa-search"></i></a>
                        </div>
                    </div>
                    <div class="text-center py-4 item-height-150">
                        <a class="h6 text-decoration-none d-block" href="@Url.Action("Details", "Product_64131375", new { Id = item.MaSua })">@item.TenSua</a>
                        <div class="d-flex align-items-center justify-content-center mt-2">
                            <h5 class="text-danger"> @item.DonGia.ToString("#,##0") đ</h5><h6 class="text-muted ml-2"><del> @{ decimal Gia = item.DonGia * 1.1M;} @Gia.ToString("#,##0") đ</del></h6>
                        </div>
                        @*<div class="d-flex align-items-center justify-content-center mb-1">
                                <small>Còn lại @item.SoLuong sản phẩm</small>
                            </div>*@
                    </div>
                </div>
            </div>

        }



    </div>
</div>
<!-- Products End -->
<!-- Products Start -->
<div class="container-fluid pt-5 pb-3">
    <div class="row px-xl-3 d-flex justify-content-between pb-1">
        <h2 class=" text-uppercase mx-xl-5 mb-4"><span class="title-sub"></span> <span class="bg-secondary pr-3">Sản phẩm bán chạy</span></h2>
        <a href="@Url.Action("TimKiemSanPhamSua_64131375", "Category_64131375")"
           class="title-view-all text-uppercase pt-4 mx-xl-5">Xem tất cả<i class="fas fa-long-arrow-alt-right"></i></a>
    </div>
    <div class="row px-xl-5">

        @{
            var danhSachSanPhamBanChay = from sps in Model.SanPhamSuas
                                         join cthd in Model.CTHoaDons
                                         on sps.MaSua equals cthd.MaSua
                                         group cthd by new { sps.MaSua, sps.TenSua, sps.AnhSua, sps.DonGia, sps.SoLuong } into gr
                                         orderby gr.Sum(cthd => cthd.SoLuongBan) descending
                                         select new
                                         {
                                             gr.Key.MaSua,
                                             gr.Key.TenSua,
                                             gr.Key.AnhSua,
                                             gr.Key.DonGia,
                                             gr.Key.SoLuong,
                                             TongSoLuongBan = gr.Sum(cthd => cthd.SoLuongBan)
                                         };
        }



        @foreach (var item in danhSachSanPhamBanChay.Take(4))
        {

            <div class="col-lg-3 col-md-4 col-sm-6 pb-1">
                <div class="product-item bg-light mb-4">

                    <div class="product-img position-relative overflow-hidden item-height">
                        <img class="img-fluid w-100 h-100" src="~/Content/assets/img/SanPhamSua/@item.AnhSua" alt="">
                        <div class="product-action">
                            <a class="btn btn-outline-info btn-square add-to-cart-btn" href="#" data-product-id="@item.MaSua"><i class="fa fa-shopping-cart"></i></a>
                            <a class="btn btn-outline-info btn-square" href="@Url.Action("Details", "Product_64131375", new { Id = item.MaSua })"><i class="fa fa-search"></i></a>
                        </div>
                    </div>
                    <div class="text-center py-4 item-height-150">
                        <a class="h6 text-decoration-none d-block" href="@Url.Action("Details", "Product_64131375", new { Id = item.MaSua })">@item.TenSua</a>
                        <div class="d-flex align-items-center justify-content-center mt-2">
                            <h5 class="text-danger"> @item.DonGia.ToString("#,##0") đ</h5><h6 class="text-muted ml-2"><del> @{ decimal Gia = item.DonGia * 1.1M;} @Gia.ToString("#,##0") đ</del></h6>
                        </div>
                        <!--<div class="d-flex align-items-center justify-content-center mb-1">
                        <small>-->
                        @*Còn lại @item.SoLuong sản phẩm*@
                        <!--</small>
                        </div>-->
                    </div>
                </div>
            </div>
        }


    </div>
</div>

<!-- Products End -->
